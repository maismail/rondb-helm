{
    "REST": {
        "Enable": true,
        "ServerIP": "0.0.0.0",
        "ServerPort": 4406
    },
    "GRPC": {
        "Enable": true,
        "ServerIP": "0.0.0.0",
        "ServerPort": 5406
    },
    "RonDB": {
        "Mgmds": [
            {
                "IP": {{ include "rondb.mgmdHostname" . | quote }},
                "Port": 1186
            }
        ],
        "ConnectionPoolSize": {{ $.Values.rondbConfig.RdrsSlotsPerNode }}
    },
{{- if eq (len $.Values.rdrs.externalMetadataCluster.mgmds) 0 }}
    "RonDBMetadataCluster": {
        "Mgmds": [
            {
                "IP": {{ include "rondb.mgmdHostname" . | quote }},
                "Port": 1186
            }
        ],
        "ConnectionPoolSize": {{ $.Values.rondbConfig.RdrsMetadataSlotsPerNode }}
    },
{{- else }}
    "RonDBMetadataCluster": {
        "Mgmds": [
{{- range $index, $mgmd := $.Values.rdrs.externalMetadataCluster.mgmds }}
            {
                "IP": {{ $mgmd.ip | quote }},
                "Port": {{ $mgmd.port | default 1186}}
            }{{- if ne (add1 $index) (len $.Values.rdrs.externalMetadataCluster.mgmds) }},{{- end }}
{{- end }}
        ],
        "ConnectionPoolSize": {{ $.Values.rdrs.externalMetadataCluster.slotsPerNode }}
    },
{{- end }}
    "Security": {
        "TLS": {
{{ if .Values.meta.rdrs.statefulSet.endToEndTls }}
{{- /*
    Standard filenames in Kubernetes TLS Secrets
*/}}
            "EnableTLS": true,
            "CertificateFile": "/etc/tls/tls.crt",
            "PrivateKeyFile": "/etc/tls/tls.key",
{{- else }}
            "EnableTLS": false,
{{- end }}
            "RequireAndVerifyClientCert": false
        },
        "APIKey": {
            "UseHopsworksAPIKeys": true
        }
    },
    "Log": {
        "Level": "info"
    }
}
